SET GLOBAL sql_mode=(SELECT REPLACE(@@sql_mode,'ONLY_FULL_GROUP_BY','')); 
ALTER TABLE `partidas` DROP FOREIGN KEY `partidas_ibfk_1`; ALTER TABLE `partidas` ADD CONSTRAINT `partidas_ibfk_1` FOREIGN KEY (`idJuego`) REFERENCES `juegos`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
ALTER TABLE `pertenencias` DROP FOREIGN KEY `pertenencias_ibfk_1`; ALTER TABLE `pertenencias` ADD CONSTRAINT `pertenencias_ibfk_1` FOREIGN KEY (`idJuego`) REFERENCES `juegos`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
ALTER TABLE `pruebas` DROP FOREIGN KEY `pruebas_ibfk_1`; ALTER TABLE `pruebas` ADD CONSTRAINT `pruebas_ibfk_1` FOREIGN KEY (`username`) REFERENCES `usuarios`(`username`) ON DELETE CASCADE ON UPDATE RESTRICT;
ALTER TABLE `pertenencias` DROP FOREIGN KEY `pertenencias_ibfk_1`; ALTER TABLE `pertenencias` ADD CONSTRAINT `pertenencias_ibfk_1` FOREIGN KEY (`idPrueba`) REFERENCES `pruebas`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
ALTER TABLE `pistas` DROP FOREIGN KEY `pistas_ibfk_1`; ALTER TABLE `pistas` ADD CONSTRAINT `pistas_ibfk_1` FOREIGN KEY (`idPrueba`) REFERENCES `pruebas`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
ALTER TABLE `peticiones` DROP FOREIGN KEY `peticiones_ibfk_1`; ALTER TABLE `peticiones` ADD CONSTRAINT `peticiones_ibfk_1` FOREIGN KEY (`idPrueba`) REFERENCES `pruebas`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
ALTER TABLE `peticiones` DROP FOREIGN KEY `peticiones_ibfk_2`; ALTER TABLE `peticiones` ADD CONSTRAINT `peticiones_ibfk_2` FOREIGN KEY (`idPrueba`, `idPista`) REFERENCES `pistas`(`idPrueba`,`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
ALTER TABLE `resoluciones` DROP FOREIGN KEY `resoluciones_ibfk_2`; ALTER TABLE `resoluciones` ADD CONSTRAINT `resoluciones_ibfk_2` FOREIGN KEY (`idPrueba`) REFERENCES `pruebas`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
ALTER TABLE `respuestas` DROP FOREIGN KEY `respuestas_ibfk_1`; ALTER TABLE `respuestas` ADD CONSTRAINT `respuestas_ibfk_1` FOREIGN KEY (`idPrueba`) REFERENCES `pruebas`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
